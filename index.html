<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT Energy Saver: Smart Home Efficiency Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-950 text-white min-h-screen p-2 sm:p-4">
    <header class="text-center mb-4 sm:mb-6 relative"> 
        <h1 class="text-2xl sm:text-4xl font-bold mb-2 bg-gradient-to-r from-blue-400 via-green-400 to-purple-400 bg-clip-text text-transparent">
            IoT Energy Saver Lab
        </h1>
        <p class="text-xs sm:text-sm text-gray-400">Simulasi Smart Home dengan Automasi Real-time</p>
    </header>

    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-4 gap-3 sm:gap-4">
        <div class="lg:col-span-3 space-y-3 sm:space-y-4">
            <div class="bg-gray-800 rounded-lg p-3 sm:p-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4">
                    <div class="text-center">
                        <h2 class="text-base sm:text-lg font-semibold mb-2">Mode Operasi</h2>
                        <div class="flex justify-center items-center gap-2 mb-2">
                            <span id="mode-label-manual" class="text-red-400 font-bold text-xs sm:text-sm">Manual</span>
                            <div id="mode-toggle" class="toggle-switch">
                                <div class="toggle-slider"></div>
                            </div>
                            <span id="mode-label-smart" class="text-green-400 font-bold opacity-50 text-xs sm:text-sm">Smart</span>
                        </div>
                        <p id="mode-description" class="text-xs text-gray-400">
                            Klik perangkat untuk kontrol manual
                        </p>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-2 items-center">
                        <div class="text-center">
                            <div class="text-2xl sm:text-3xl mb-1">ğŸŒ¡ï¸</div>
                            <div class="temperature-display text-xs sm:text-sm">
                                <span id="room-temp" class="text-yellow-400 font-bold">28Â°C</span>
                            </div>
                            <p class="text-xs text-gray-400 mt-1">Suhu</p>
                        </div>
                        
                        <div class="text-center">
                            <div class="text-2xl sm:text-3xl mb-1">
                                <span id="time-icon">â˜€ï¸</span>
                            </div>
                            <div class="temperature-display text-xs sm:text-sm">
                                <span id="current-time" class="text-blue-400 font-bold">12:00</span>
                            </div>
                            <p class="text-xs text-gray-400 mt-1">Waktu</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4 bg-gray-700 rounded-lg p-3">
                    <div class="flex justify-between items-center mb-2">
                        <label class="text-xs sm:text-sm font-semibold">Pengaturan Waktu</label>
                        <span id="time-period" class="text-xs text-yellow-400 font-bold">Siang</span>
                    </div>
                    <input type="range" id="time-slider" class="time-slider" min="0" max="23" value="12" step="1">
                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                        <span>00:00</span>
                        <span>06:00</span>
                        <span>12:00</span>
                        <span>18:00</span>
                        <span>23:59</span>
                    </div>
                </div>
            </div>

            <div class="bg-gray-800 rounded-lg p-3 sm:p-4">
                <h2 class="text-base sm:text-lg font-semibold mb-2 sm:mb-3">Visualisasi Rumah</h2>
                <div class="relative">
                    <div id="room-area" class="room-area day manual-mode rounded-lg p-3 sm:p-6 min-h-[400px] sm:min-h-[600px] relative overflow-hidden">
                        <div id="sun-icon" class="sun-icon" style="right: 30px;">â˜€ï¸</div>
                        <div id="moon-icon" class="moon-icon" style="right: 30px;">ğŸŒ™</div>
                        
                        <div class="floor-tile"></div>
                        
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4 h-full relative z-10">
                            <div id="light-living" class="device-card rounded-lg p-2 sm:p-3 text-center">
                                <div class="device-icon text-3xl sm:text-5xl mb-1 sm:mb-2">ğŸ’¡</div>
                                <p class="font-semibold text-xs sm:text-sm">Lampu Tamu</p>
                                <p class="light-status text-xs text-gray-400 mt-1">Mati</p>
                                <div class="power-bar mt-1 sm:mt-2">
                                    <div class="power-bar-fill bg-yellow-400" style="width: 0%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1"><span class="light-power">0</span>W</p>
                            </div>

                            <div id="tv-device" class="device-card rounded-lg p-2 sm:p-3 text-center">
                                <div id="tv-icon" class="device-icon text-3xl sm:text-5xl mb-1 sm:mb-2">ğŸ“º</div>
                                <p class="font-semibold text-xs sm:text-sm">Smart TV</p>
                                <p id="tv-status" class="text-xs text-gray-400 mt-1">Standby</p>
                                <div class="power-bar mt-1 sm:mt-2">
                                    <div id="tv-power-bar" class="power-bar-fill bg-blue-400" style="width: 10%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1"><span id="tv-power">2</span>W</p>
                            </div>

                            <div id="ac-device" class="device-card rounded-lg p-2 sm:p-3 text-center">
                                <div id="ac-icon" class="device-icon text-3xl sm:text-5xl mb-1 sm:mb-2">â„ï¸</div>
                                <p class="font-semibold text-xs sm:text-sm">AC</p>
                                <p id="ac-status" class="text-xs text-gray-400 mt-1">Mati</p>
                                <div class="power-bar mt-1 sm:mt-2">
                                    <div id="ac-power-bar" class="power-bar-fill bg-cyan-400" style="width: 0%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1"><span id="ac-power">0</span>W</p>
                            </div>

                            <div id="light-bedroom" class="device-card rounded-lg p-2 sm:p-3 text-center">
                                <div class="device-icon text-3xl sm:text-5xl mb-1 sm:mb-2">ğŸ’¡</div>
                                <p class="font-semibold text-xs sm:text-sm">Lampu Kamar</p>
                                <p class="light-status text-xs text-gray-400 mt-1">Mati</p>
                                <div class="power-bar mt-1 sm:mt-2">
                                    <div class="power-bar-fill bg-yellow-400" style="width: 0%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1"><span class="light-power">0</span>W</p>
                            </div>

                            <div id="fan-device" class="device-card rounded-lg p-2 sm:p-3 text-center">
                                <div id="fan-icon" class="device-icon text-3xl sm:text-5xl mb-1 sm:mb-2">ğŸŒ€</div>
                                <p class="font-semibold text-xs sm:text-sm">Kipas</p>
                                <p id="fan-status" class="text-xs text-gray-400 mt-1">Mati</p>
                                <div class="power-bar mt-1 sm:mt-2">
                                    <div id="fan-power-bar" class="power-bar-fill bg-blue-300" style="width: 0%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1"><span id="fan-power">0</span>W</p>
                            </div>

                            <div id="heater-device" class="device-card rounded-lg p-2 sm:p-3 text-center">
                                <div id="heater-icon" class="device-icon text-3xl sm:text-5xl mb-1 sm:mb-2">â™¨ï¸</div>
                                <p class="font-semibold text-xs sm:text-sm">Heater</p>
                                <p id="heater-status" class="text-xs text-gray-400 mt-1">Mati</p>
                                <div class="power-bar mt-1 sm:mt-2">
                                    <div id="heater-power-bar" class="power-bar-fill bg-red-400" style="width: 0%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1"><span id="heater-power">0</span>W</p>
                            </div>

                            <div id="fridge-device" class="device-card rounded-lg p-2 sm:p-3 text-center active disabled">
                                <div id="fridge-icon" class="device-icon text-3xl sm:text-5xl mb-1 sm:mb-2 fridge-on">ğŸ§Š</div>
                                <p class="font-semibold text-xs sm:text-sm">Kulkas</p>
                                <p id="fridge-status" class="text-xs text-green-400 mt-1">Aktif</p>
                                <div class="power-bar mt-1 sm:mt-2">
                                    <div id="fridge-power-bar" class="power-bar-fill bg-cyan-300" style="width: 40%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1"><span id="fridge-power">100</span>W</p>
                            </div>

                            <div id="router-device" class="device-card rounded-lg p-2 sm:p-3 text-center active disabled">
                                <div class="device-icon text-3xl sm:text-5xl mb-1 sm:mb-2">ğŸ“¡</div>
                                <p class="font-semibold text-xs sm:text-sm">Router</p>
                                <p id="router-status" class="text-xs text-green-400 mt-1">Online</p>
                                <div class="power-bar mt-1 sm:mt-2">
                                    <div id="router-power-bar" class="power-bar-fill bg-purple-400" style="width: 20%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1"><span id="router-power">8</span>W</p>
                            </div>

                            <div id="light-kitchen" class="device-card rounded-lg p-2 sm:p-3 text-center">
                                <div class="device-icon text-3xl sm:text-5xl mb-1 sm:mb-2">ğŸ’¡</div>
                                <p class="font-semibold text-xs sm:text-sm">Lampu Dapur</p>
                                <p class="light-status text-xs text-gray-400 mt-1">Mati</p>
                                <div class="power-bar mt-1 sm:mt-2">
                                    <div class="power-bar-fill bg-yellow-400" style="width: 0%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1"><span class="light-power">0</span>W</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="space-y-3">
            <div class="bg-gray-800 rounded-lg p-3 sm:p-4">
                <h2 class="text-base sm:text-lg font-semibold mb-3">ğŸ“Š Dashboard</h2>
                
                <div class="bg-indigo-900/30 border-2 border-indigo-500 rounded-lg p-2 sm:p-3 mb-2 sm:mb-3">
                    <p class="text-xs text-indigo-300 mb-1">Kapasitas Listrik Rumah</p>
                    <p class="text-xl sm:text-2xl font-bold text-indigo-400">2200 VA</p>
                    <p class="text-xs text-gray-400 mt-1">220V Ã— 10A</p>
                </div>

                <div class="bg-gray-700 rounded-lg p-2 sm:p-3 mb-2 sm:mb-3">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-xs text-gray-400">Waktu Simulasi</p>
                            <p id="simulation-time" class="text-lg sm:text-xl font-bold">0 detik</p>
                        </div>
                        <div class="flex space-x-2">
                            <button id="toggle-sim-control" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs font-semibold transition">
                                â–¶ Mulai
                            </button>
                            <button id="reset-simulation" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-semibold transition">
                                ğŸ”„ Reset
                            </button>
                        </div>
                    </div>
                </div>

                <div class="bg-purple-900/30 border-2 border-purple-500 rounded-lg p-2 sm:p-3 mb-2 sm:mb-3">
                    <p class="text-xs text-purple-300 mb-1">Daya Real-time</p>
                    <p id="current-power" class="text-xl sm:text-2xl font-bold text-purple-400">110 W</p>
                </div>

                <div class="bg-red-900/30 border-2 border-red-500 rounded-lg p-2 sm:p-3 mb-2 sm:mb-3">
                    <p class="text-xs text-red-300 mb-1">Konsumsi Manual</p>
                    <p id="manual-consumption" class="text-xl sm:text-2xl font-bold text-red-400">0.000</p>
                    <p class="text-xs text-gray-400">kWh</p>
                    <p class="text-xs text-gray-500 mt-1">Rata-rata: <span id="manual-avg-power" class="text-red-300 font-semibold">0 W</span></p>
                </div>

                <div class="bg-green-900/30 border-2 border-green-500 rounded-lg p-2 sm:p-3 mb-2 sm:mb-3">
                    <p class="text-xs text-green-300 mb-1">Konsumsi Smart</p>
                    <p id="smart-consumption" class="text-xl sm:text-2xl font-bold text-green-400">0.000</p>
                    <p class="text-xs text-gray-400">kWh</p>
                    <p class="text-xs text-gray-500 mt-1">Rata-rata: <span id="smart-avg-power" class="text-green-300 font-semibold">0 W</span></p>
                </div>

                <div class="bg-blue-900/30 border-2 border-blue-500 rounded-lg p-2 sm:p-3 mb-2 sm:mb-3">
                    <p class="text-xs text-blue-300 mb-1">Penghematan Energi</p>
                    <p id="saving-percentage" class="text-xl sm:text-2xl font-bold text-blue-400">0.0%</p>
                    <p class="text-xs text-gray-400 mt-1">Hemat: <span id="saved-kwh" class="text-blue-300 font-semibold">0.000 kWh</span></p>
                </div>

                <div class="bg-yellow-900/30 border-2 border-yellow-500 rounded-lg p-2 sm:p-3">
                    <p class="text-xs text-yellow-300 mb-1">Biaya Listrik (@Rp 1.444/kWh)</p>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div>
                            <p class="text-xs text-gray-400">Manual</p>
                            <p id="manual-cost" class="text-sm font-bold text-red-400">Rp 0</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-400">Smart</p>
                            <p id="smart-cost" class="text-sm font-bold text-green-400">Rp 0</p>
                        </div>
                    </div>
                    <div class="mt-2 pt-2 border-t border-yellow-700">
                        <p class="text-xs text-yellow-300">Hemat Biaya</p>
                        <p id="saved-cost" class="text-lg font-bold text-yellow-400">Rp 0</p>
                    </div>
                </div>
            </div>

            <div class="bg-gray-800 rounded-lg p-3 sm:p-4">
                <h2 class="text-sm sm:text-base font-semibold mb-2">â° Jadwal Smart</h2>
                <div id="smart-schedule" class="space-y-2 text-xs"></div>
            </div>

            <div class="bg-gray-800 rounded-lg p-3 sm:p-4">
                <h2 class="text-sm sm:text-base font-semibold mb-2">ğŸ”Œ Perangkat Aktif</h2>
                <div id="active-devices" class="text-xs text-gray-400 space-y-1"></div>
            </div>
        </div>
    </div>

    <div id="guide-modal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 rounded-xl max-w-lg w-11/12 mx-4 p-6 shadow-2xl relative border-t-4 border-blue-500">
            <h2 class="text-2xl font-bold text-blue-400 mb-3 flex items-center">
                ğŸ“˜ Cara Menggunakan Simulator
            </h2>
            
            <p class="text-gray-300 text-sm mb-4">
                Simulator ini menunjukkan perbandingan konsumsi energi antara **Kontrol Manual** (boros) dan **Mode Smart** (hemat) dalam jangka waktu yang sama.
            </p>
            
            <div class="space-y-3 text-sm">
                <h3 class="font-semibold text-white border-b border-gray-700 pb-1">Langkah Perbandingan:</h3>
                
                <div class="flex items-start">
                    <span class="mr-3 text-lg font-bold text-yellow-400">1.</span>
                    <p>
                        Tekan tombol **<span class="text-orange-400">â–¶ Mulai Hitung</span>** di Dashboard untuk mengaktifkan perhitungan waktu.
                    </p>
                </div>
                
                <div class="flex items-start">
                    <span class="mr-3 text-lg font-bold text-yellow-400">2.</span>
                    <p>
                        Pilih **<span class="text-red-400">Mode Manual</span>** (tombol *toggle* di kiri). Gunakan fitur kontrol perangkat (klik icon) dan atur slider waktu sesuai skenario konsumsi boros Anda. Biarkan berjalan selama beberapa detik/menit.
                    </p>
                </div>
                
                <div class="flex items-start">
                    <span class="mr-3 text-lg font-bold text-yellow-400">3.</span>
                    <p>
                        Tekan **<span class="text-orange-400">â¸ Jeda Hitung</span>**. Kemudian, alihkan ke **<span class="text-green-400">Mode Smart</span>**.
                    </p>
                </div>
                
                <div class="flex items-start">
                    <span class="mr-3 text-lg font-bold text-yellow-400">4.</span>
                    <p>
                        Tekan **<span class="text-orange-400">â–¶ Lanjutkan Hitung</span>** lagi. Biarkan berjalan dalam durasi yang sama atau lebih.
                    </p>
                </div>
                
                <div class="flex items-start">
                    <span class="mr-3 text-lg font-bold text-yellow-400">5.</span>
                    <p>
                        Lihat hasil perbandingan di Dashboard: **Konsumsi Manual** vs **Konsumsi Smart** dan persentase **Penghematan Energi**.
                    </p>
                </div>
            </div>
            
            <button id="close-guide-modal" class="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-lg transition shadow-md">
                Mengerti, Mari Mulai!
            </button>
            <button id="open-info-modal-from-guide" class="mt-2 w-full text-xs text-blue-400 hover:text-blue-300 font-semibold transition">
                Baca Tentang Web Ini Selengkapnya â¡ï¸
            </button>
        </div>
    </div>

    <div id="info-modal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60] hidden">
        <div class="bg-gray-800 rounded-xl max-w-2xl w-11/12 mx-4 p-6 shadow-2xl relative border-t-4 border-green-500 max-h-[90vh] overflow-y-scroll scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800">
            <h2 class="text-2xl font-bold text-green-400 mb-4 border-b border-gray-700 pb-2">
                ğŸ”¬ Detail Simulasi IoT Energy Saver Lab
            </h2>
            
            <p class="text-gray-300 text-sm mb-4">
                Ini adalah informasi teknis tentang asumsi daya yang digunakan, logika automasi, dan cara kerja sensor suhu.
            </p>

            <h3 class="text-lg font-semibold text-white mt-4 mb-2">1. Nilai Daya Perangkat (Watt)</h3>
            <p class="text-xs text-gray-400 mb-2">Angka ini digunakan untuk menghitung konsumsi riil dan potensi penghematan.</p>
            <table class="w-full text-sm text-left text-gray-400 rounded-lg overflow-hidden">
                <thead class="text-xs text-gray-100 uppercase bg-gray-700">
                    <tr>
                        <th scope="col" class="px-3 py-2">Perangkat</th>
                        <th scope="col" class="px-3 py-2 text-center">Manual (W)</th>
                        <th scope="col" class="px-3 py-2 text-center">Smart (W)</th>
                        <th scope="col" class="px-3 py-2 text-center">Potensi Hemat</th>
                    </tr>
                </thead>
                <tbody id="device-power-table">
                    </tbody>
            </table>

            <h3 class="text-lg font-semibold text-white mt-6 mb-2">2. Logika Kontrol Suhu Smart</h3>
            <ul class="list-disc list-inside text-sm text-gray-300 ml-2 space-y-1">
                <li>Suhu Tinggi (> 28Â°C): AC dan Kipas akan ON. AC menggunakan mode Efisien (24Â°C).</li>
                <li>Suhu Normal (26Â°C - 28Â°C): AC akan OFF, Kipas akan ON (jika antara jam 09:00 - 22:00) untuk pendinginan ringan.</li>
                <li>Suhu Rendah (< 20Â°C): Heater akan ON (Hanya pada jam 07:00 - 08:00 pagi).</li>
            </ul>

            <h3 class="text-lg font-semibold text-white mt-6 mb-2">3. Jadwal Otomatisasi (Smart Schedule)</h3>
            <div id="smart-schedule-info" class="space-y-2 text-sm bg-gray-700 p-3 rounded-lg">
                </div>

            <button id="close-info-modal" class="mt-6 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 rounded-lg transition shadow-md">
                Tutup
            </button>
        </div>
    </div>
    <button id="open-guide-modal" aria-label="Buka Panduan" class="fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-50 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-4 py-2 rounded-full text-xs sm:text-sm font-bold">
        â“ Panduan
    </button>
    <script src="script.js"></script>
</body>
</html>